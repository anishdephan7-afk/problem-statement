<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ROI Automation Calculator</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    label { display: block; margin-top: 10px; }
    input { width: 200px; }
    button { margin-top: 20px; }
    #results { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ROI Automation Calculator</h1>

  <label>Scenario Name: <input id="scenario_name" /></label>
  <label>Monthly Invoice Volume: <input type="number" id="monthly_invoice_volume" /></label>
  <label>Number of AP Staff: <input type="number" id="num_ap_staff" /></label>
  <label>Avg Hours per Invoice: <input type="number" step="0.01" id="avg_hours_per_invoice" /></label>
  <label>Hourly Wage: <input type="number" step="0.01" id="hourly_wage" /></label>
  <label>Manual Error Rate (%): <input type="number" step="0.01" id="error_rate_manual" /></label>
  <label>Error Cost: <input type="number" step="0.01" id="error_cost" /></label>
  <label>Time Horizon (months): <input type="number" id="time_horizon_months" /></label>
  <label>One-time Implementation Cost: <input type="number" step="0.01" id="one_time_implementation_cost" /></label>

  <button onclick="simulate()">Simulate ROI</button>

  <div id="results"></div>

  <script>
    async function simulate() {
      const data = {
        scenario_name: document.getElementById('scenario_name').value,
        monthly_invoice_volume: parseFloat(document.getElementById('monthly_invoice_volume').value),
        num_ap_staff: parseFloat(document.getElementById('num_ap_staff').value),
        avg_hours_per_invoice: parseFloat(document.getElementById('avg_hours_per_invoice').value),
        hourly_wage: parseFloat(document.getElementById('hourly_wage').value),
        error_rate_manual: parseFloat(document.getElementById('error_rate_manual').value),
        error_cost: parseFloat(document.getElementById('error_cost').value),
        time_horizon_months: parseFloat(document.getElementById('time_horizon_months').value),
        one_time_implementation_cost: parseFloat(document.getElementById('one_time_implementation_cost').value)
      };

      const res = await fetch('http://localhost:4000/simulate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      document.getElementById('results').innerHTML = `
        <h3>Results</h3>
        <p>Manual Labor Cost: $${result.labor_cost_manual}</p>
        <p>Automation Cost: $${result.auto_cost}</p>
        <p>Monthly Savings: $${result.monthly_savings}</p>
        <p>Payback (months): ${result.payback_months}</p>
        <p>ROI (%): ${result.ROI_percent}</p>
      `;
    }
  </script>
</body>
</html>
